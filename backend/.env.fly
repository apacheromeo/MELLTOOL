# ============================================
# FLY.IO ENVIRONMENT VARIABLES
# ============================================
# Use: flyctl secrets set KEY="value"
# These variables should be set as Fly.io secrets, not in a .env file

# ============================================
# DATABASE (Required)
# ============================================
# Get from Supabase → Settings → Database → Connection Pooling
# IMPORTANT: Use port 6543 with ?pgbouncer=true parameter
DATABASE_URL="postgresql://postgres.xxxxx:[PASSWORD]@aws-0-region.pooler.supabase.com:6543/postgres?pgbouncer=true"

# ============================================
# JWT AUTHENTICATION (Required)
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET="your-jwt-secret-min-32-characters-long"
JWT_REFRESH_SECRET="your-refresh-token-secret-min-32-chars"
JWT_EXPIRATION="15m"
JWT_REFRESH_EXPIRATION="7d"

# ============================================
# APPLICATION (Required)
# ============================================
NODE_ENV="production"
PORT="3001"

# Frontend URL for CORS (your Vercel deployment)
FRONTEND_URL="https://your-frontend.vercel.app"

# ============================================
# REDIS (Optional - for caching, sessions, queues)
# ============================================
# You can use Upstash Redis (free tier available)
# https://upstash.com/
REDIS_HOST="your-redis-host.upstash.io"
REDIS_PORT="6379"
REDIS_PASSWORD="your-redis-password"
REDIS_TLS="true"

# ============================================
# FILE UPLOAD (Optional)
# ============================================
MAX_FILE_SIZE="10485760"  # 10MB in bytes
UPLOAD_DIR="./uploads"
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# ============================================
# RATE LIMITING (Optional)
# ============================================
THROTTLE_TTL="60"      # Time window in seconds
THROTTLE_LIMIT="100"   # Max requests per TTL

# ============================================
# SECURITY (Optional but recommended)
# ============================================
COOKIE_SECRET="your-cookie-secret-min-32-chars"
SESSION_SECRET="your-session-secret-min-32-chars"

# ============================================
# ERROR TRACKING (Optional)
# ============================================
# Sign up at https://sentry.io for free tier
SENTRY_DSN="https://xxxxx@xxxxx.ingest.sentry.io/xxxxx"

# ============================================
# SHOPEE INTEGRATION (Optional)
# ============================================
SHOPEE_PARTNER_ID="your-shopee-partner-id"
SHOPEE_PARTNER_KEY="your-shopee-partner-key"
SHOPEE_REDIRECT_URL="https://melltool-backend.fly.dev/api/shopee/callback"
SHOPEE_API_URL="https://partner.shopeemobile.com"

# ============================================
# HOW TO SET THESE ON FLY.IO
# ============================================
#
# Option 1: Set one at a time
# flyctl secrets set DATABASE_URL="your-connection-string"
# flyctl secrets set JWT_SECRET="your-secret"
#
# Option 2: Set multiple at once
# flyctl secrets set \
#   DATABASE_URL="connection-string" \
#   JWT_SECRET="secret1" \
#   JWT_REFRESH_SECRET="secret2" \
#   FRONTEND_URL="https://your-frontend.vercel.app"
#
# Option 3: Import from file (create .env.production first)
# flyctl secrets import < .env.production
#
# View secrets (values are hidden):
# flyctl secrets list
#
# Remove a secret:
# flyctl secrets unset KEY
#
# ============================================
# NOTES
# ============================================
# - Never commit secrets to git
# - Use strong, randomly generated secrets for production
# - Secrets are encrypted at rest and in transit
# - Changing secrets will redeploy your app
# - Fly.io automatically injects these as environment variables
