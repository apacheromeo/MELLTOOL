# ============================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to git!
# ============================================

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL database credentials
# Generate password: openssl rand -base64 32
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_RUN_generate-secrets.sh
POSTGRES_DB=inventory_db

# Full database URL (used by backend)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?schema=public&connection_limit=10

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis password for production
# Generate password: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_RUN_generate-secrets.sh
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# ============================================
# JWT AUTHENTICATION SECRETS
# ============================================
# CRITICAL: Generate strong secrets using: openssl rand -base64 64
# NEVER use the same secret for access and refresh tokens!

# Access token secret (64+ characters)
JWT_SECRET=CHANGE_ME_RUN_generate-secrets.sh

# Refresh token secret (64+ characters, must be different from JWT_SECRET)
JWT_REFRESH_SECRET=CHANGE_ME_RUN_generate-secrets.sh

# Token expiration times
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# ============================================
# SESSION CONFIGURATION
# ============================================
# Session secret for express-session
# Generate: openssl rand -base64 32
SESSION_SECRET=CHANGE_ME_RUN_generate-secrets.sh

# ============================================
# APPLICATION URLS
# ============================================
# Your production domain (no trailing slash)
FRONTEND_URL=https://your-domain.com

# API domain
API_URL=https://api.your-domain.com

# Allowed CORS origins (comma-separated)
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# ============================================
# FRONTEND PUBLIC VARIABLES
# ============================================
# These are exposed to the browser - NO SECRETS HERE!
NEXT_PUBLIC_API_URL=https://api.your-domain.com

# ============================================
# SECURITY SETTINGS
# ============================================
# Rate limiting (requests per time window)
RATE_LIMIT_TTL=900
# 15 minutes in seconds
RATE_LIMIT_MAX=100
# Maximum requests per window

# File upload size limit (bytes)
MAX_FILE_SIZE=5242880
# 5MB default

# Node environment
NODE_ENV=production

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# ============================================
# MONITORING & ERROR TRACKING
# ============================================
# Sentry DSN for error tracking (optional but recommended)
# Get from: https://sentry.io
SENTRY_DSN=

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# For notifications and alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@your-domain.com

# ============================================
# BACKUP CONFIGURATION
# ============================================
# Local backup directory
BACKUP_DIR=/home/deployuser/backups

# Encryption key for backup files
# Generate: openssl rand -base64 32
ENCRYPTION_KEY=CHANGE_ME_RUN_generate-secrets.sh

# S3-compatible storage for backups (AWS S3, MinIO, DigitalOcean Spaces)
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=inventory-backups
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=ap-southeast-1

# ============================================
# SHOPEE INTEGRATION (Optional)
# ============================================
# Get credentials from Shopee Open Platform
SHOPEE_PARTNER_ID=
SHOPEE_PARTNER_KEY=
SHOPEE_REDIRECT_URL=https://your-domain.com/api/shopee/callback
SHOPEE_API_URL=https://partner.shopeemobile.com

# ============================================
# ANALYTICS (Optional)
# ============================================
# Google Analytics
NEXT_PUBLIC_GA_ID=

# Other analytics
NEXT_PUBLIC_ENABLE_ANALYTICS=false

# ============================================
# DATA PATHS (for Docker volumes)
# ============================================
DATA_PATH=./data

# ============================================
# FEATURE FLAGS
# ============================================
NEXT_PUBLIC_ENABLE_SHOPEE_INTEGRATION=true
NEXT_PUBLIC_ENABLE_BARCODE_PRINTING=true
NEXT_PUBLIC_ENABLE_CAMERA_SCANNER=true

# ============================================
# ADMIN USER (Initial Setup)
# ============================================
# These are used only for initial setup
# Generate password: openssl rand -base64 24
ADMIN_EMAIL=admin@your-domain.com
ADMIN_PASSWORD=CHANGE_ME_RUN_generate-secrets.sh
ADMIN_NAME=Administrator

# ============================================
# SECURITY CHECKLIST
# ============================================
# Before deploying, ensure:
# [ ] All CHANGE_ME values are replaced
# [ ] All passwords are strong (32+ characters)
# [ ] JWT secrets are 64+ characters
# [ ] All secrets are unique (not reused)
# [ ] Database password is strong
# [ ] Redis password is set
# [ ] Session secret is strong
# [ ] Encryption key is set
# [ ] Frontend URL matches your domain
# [ ] Allowed origins are correct
# [ ] This file is in .gitignore
# [ ] You have a backup of this file (encrypted)
# [ ] File permissions are 600 (chmod 600 .env)
#
# Generate all secrets at once:
# ./scripts/generate-secrets.sh
# ============================================

# ============================================
# QUICK SETUP COMMANDS
# ============================================
#
# 1. Generate all secrets:
#    ./scripts/generate-secrets.sh
#
# 2. Copy this file:
#    cp .env.production.example .env
#
# 3. Edit with your values:
#    nano .env
#
# 4. Secure the file:
#    chmod 600 .env
#
# 5. Deploy:
#    ./scripts/deploy.sh
#
# ============================================
